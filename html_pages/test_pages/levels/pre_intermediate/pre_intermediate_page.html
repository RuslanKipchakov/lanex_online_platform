<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Тест уровня Pre-Intermediate</title>

  <!-- Telegram WebApp SDK -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <!-- Основные стили -->
  <link rel="stylesheet" href="../../common/css/style_v_3.css" />

  <!-- Плеер для аудио -->
  <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css" />
  <script defer src="https://cdn.plyr.io/3.7.8/plyr.polyfilled.js"></script>
</head>

<body>
  <div class="container">

    <!-- Логотип -->
    <div class="logo-section">
      <img src="../../common/images/logo_header.png" alt="Lanex Logo" class="logo" />
    </div>

    <!-- Заголовок и дисклеймер -->
    <header>
      <h1>Тест на подтверждение уровня Pre-Intermediate</h1>
      <p>
        <strong>Дисклеймер:</strong> данный тест составлен преподавателями учебного центра
        <b>Lanex</b> исключительно для внутреннего использования.
      </p>
    </header>

    <!-- Инструкции -->
    <div class="instructions">
      <h2>Рекомендации перед началом теста:</h2>
      <ul>
        <li>Убедитесь, что у вас есть 30–40 минут свободного времени;</li>
        <li>Проверьте, что вы можете прослушивать аудиофайлы (Task 2);</li>
        <li>Подготовьте бумагу и ручку или карандаш (при необходимости);</li>
        <li>Не используйте словари или стороннюю помощь.</li>
      </ul>
    </div>

    <!-- Форма теста в блоке -->
    <div class="form-block">
      <form id="testForm">

        <!-- Имя пользователя -->
        <div id="user-info">
          <label for="username">Введите ваше имя:</label>
          <input type="text" id="username" name="username" placeholder="Ваше имя" required />
        </div>

        <!-- Скрытые поля -->
        <input type="hidden" id="access-token" name="token" value="" />
        <input type="hidden" id="telegram-id" name="telegram_id" value="" />

        <!-- Task 1 -->
        <div id="task1" class="task">
          <h2>Task 1: Grammar and Vocabulary</h2>
          <p class="task-instruction">
            Choose one correct answer (A–D) for each question.
          </p>
        </div>

        <!-- Task 2 -->
        <div id="task2" class="task">
          <h2>Task 2: Listening</h2>
          <p class="task-instruction">
            You will listen to 3 recordings. <b>You can listen to each recording only once.</b><br />
            Read the questions carefully before listening, then play the audio and answer.
          </p>
        </div>

        <!-- Task 3 -->
        <div id="task3" class="task">
          <h2>Task 3: Reading Comprehension</h2>
          <p class="task-instruction">
            Read the passages. Answer questions 1–15 by choosing the correct option (A–D).
          </p>
        </div>

        <!-- Task 4 -->
        <div id="task4" class="task">
          <h2>Task 4: Writing</h2>
        </div>

        <!-- Кнопки управления -->
        <div class="buttons">
          <button type="button" id="back-button" class="btn-primary">Назад</button>
          <button type="button" id="submit-test" class="btn-primary">Отправить ответы</button>
        </div>

      </form>
    </div>

    <!-- Результаты -->
    <div id="result"></div>
  </div>

  <!-- Индикатор загрузки -->
  <div id="loader" class="loader-overlay">
    <div class="loader-spinner"></div>
    <p>Проверяем ответы...</p>
  </div>

  <!-- Подключение движка и рендеров -->
  <script type="module" src="../../common/js/test_engine.js"></script>

  <!-- Данные заданий -->
  <script type="module" src="./js/task1_data.js"></script>
  <script type="module" src="./js/task2_data.js"></script>
  <script type="module" src="./js/task3_data.js"></script>
  <script type="module" src="./js/task4_data.js"></script>

  <!-- Функции рендера -->
  <script type="module" src="./js/render_task1.js"></script>
  <script type="module" src="./js/render_task2.js"></script>
  <script type="module" src="./js/render_task3.js"></script>
  <script type="module" src="./js/render_task4.js"></script>

  <!-- Главный скрипт -->
  <script type="module" src="./js/main_v_2.js"></script>
</body>
</html>
